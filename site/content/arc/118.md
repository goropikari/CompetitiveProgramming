+++
date = '2025-05-05T17:54:09+09:00'
title = 'ARC 118'
tags = ["atcoder", "arc"]
+++
## A. Tax Included Price

<https://atcoder.jp/contests/arc118/tasks/arc118_a>

## B. Village of M People

<https://atcoder.jp/contests/arc118/tasks/arc118_b>

解説 AC.

二分探索を使って upper bound を探索するところまでは思いついたが、$B$ を構築できるかの判定が甘くて自力で AC できなかった。

$\max_i |\frac{B_i}{M} - \frac{A_i}{N}| = \frac{1}{MN} \max_i | NB_i - MA_i |$ より $\max_i | NB_i - MA_i |$ の最小化問題に帰着できる。

$\max_i | NB_i - MA_i | \leq D$ となる $D$ が存在するとき

\begin{align*}
    -D \leq NB_i - MA_i \leq D \\\\
    -D + MA_i \leq NB_i \leq D + MA_i \\\\
    \frac{-D + MA_i}{N} \leq B_i \leq \frac{D + MA_i}{N}
\end{align*}

ここで $B_i$ は非負整数だから

\begin{align*}
    \max\left(0, \left\lceil \frac{-D + MA_i}{N} \right\rceil \right) \leq B_i \leq \left\lfloor \frac{D + MA_i}{N} \right\rfloor
\end{align*}

$L = \sum_i \max\left(0, \left\lceil \frac{-D + MA_i}{N} \right\rceil \right)$, $R = \sum_i \left\lfloor \frac{D + MA_i}{N} \right\rfloor
$ とすると
$L \leq M \leq R$ のとき、$|NB_i - MA_i| \leq D$ を満たす正数列 $B$ が存在する。

$B$ の構築の仕方は、始め $B_i$ を上限で初期化しておいて、余分な分を各 $B_i$ から引いていく。このとき、下限未満にはできないことに注意

```cpp
void solve() {
    ios_base::sync_with_stdio(false);
    cin.tie(nullptr);

    ll K, N, M;
    cin >> K >> N >> M;
    vll A(K);
    rep(i, K) cin >> A[i];

    auto cal = [&](ll d) -> bool {
        ll rsum = 0;
        for (ll a : A) {
            rsum += (d + M * a) / N;
        }

        ll lsum = 0;
        for (ll a : A) {
            lsum += (max(0ll, (-d + M * a)) + N - 1) / N;
        }

        return lsum <= M && M <= rsum;
    };

    ll ac = INF, wa = -1;
    while (ac - wa > 1) {
        ll wj = (ac + wa) / 2;
        if (cal(wj))
            ac = wj;
        else
            wa = wj;
    }
    vll B;
    rep(i, K) {
        B.push_back((ac + M * A[i]) / N);
    }

    ll ndel = accumulate(all(B), 0ll) - M;
    rep(i, K) {
        if (ndel == 0)
            break;
        ll lower = (max(0ll, (-ac + M * A[i])) + N - 1) / N;
        ll x = min(ndel, B[i] - lower);
        B[i] -= x;
        ndel -= x;
    }
    print(B);
}
```

## C. Coprime Set

<https://atcoder.jp/contests/arc118/tasks/arc118_c>

## D. Hamiltonian Cycle

<https://atcoder.jp/contests/arc118/tasks/arc118_d>

## E. Avoid Permutations

<https://atcoder.jp/contests/arc118/tasks/arc118_e>

## F. Growth Rate

<https://atcoder.jp/contests/arc118/tasks/arc118_f>
