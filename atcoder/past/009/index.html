<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/CompetitiveProgramming/libs/katex/katex.min.css"> <link rel=stylesheet  href="/CompetitiveProgramming/libs/highlight/github.min.css"> <link rel=stylesheet  href="/CompetitiveProgramming/css/franklin.css"> <link rel=stylesheet  href="/CompetitiveProgramming/css/poole_hyde.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } .result-title a { text-decoration: none; } .result-title a:hover { text-decoration: underline; } .result-preview { color: #808080; } .resultCount { color: #808080; } .result-query { font-weight: bold; } #lunrSearchForm { margin-top: 1em; } </style> <link rel=icon  href="/CompetitiveProgramming/assets/favicon.png"> <title>第九回 アルゴリズム実技検定</title> <script src="/CompetitiveProgramming/libs/lunr/lunr.min.js"></script> <script src="/CompetitiveProgramming/libs/lunr/lunr_index.js"></script> <script src="/CompetitiveProgramming/libs/lunr/lunrclient.min.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112840751-3"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112840751-3'); </script> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h1><a href="/CompetitiveProgramming/">競プロ メモ</a></h1> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/CompetitiveProgramming/">Home</a> <a class="sidebar-nav-item " href="/CompetitiveProgramming/tag/algorithm/">Algorithm</a> <a class="sidebar-nav-item " href="/CompetitiveProgramming/tag/atcoder/">AtCoder</a> <a class="sidebar-nav-item " href="/CompetitiveProgramming/tag/abc/">ABC</a> <a class="sidebar-nav-item " href="/CompetitiveProgramming/tag/arc/">ARC</a> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/CompetitiveProgramming/src/search"> </form> </nav> <p>&copy; <a href=https://github.com/goropikari>goropikari</a>.</p> </div> </div> <div class="content container"> <div class=franklin-content > <h1 id="第九回_アルゴリズム実技検定_memo"><a href="#第九回_アルゴリズム実技検定_memo" class=header-anchor >第九回 アルゴリズム実技検定 memo</a></h1> <p><a href="https://atcoder.jp/contests/past202112-open">第九回 アルゴリズム実技検定</a></p> <div class=franklin-toc ><ol><li><a href="#a_-_アトラクション">A - アトラクション</a><li><a href="#b_-_穴の開いた硬貨">B - 穴の開いた硬貨</a><li><a href="#c_-_最速正解者">C - 最速正解者</a><li><a href="#d_-_試験">D - 試験</a><li><a href="#e_-_キーボード">E - キーボード</a><li><a href="#f_-_将棋のように">F - 将棋のように</a><li><a href="#g_-_連結">G - 連結</a><li><a href="#h_-_最長非共通部分列">H - 最長非共通部分列</a><li><a href="#i_-_直通エレベーター">I - 直通エレベーター</a><li><a href="#j_-_回転と反転">J - 回転と反転</a><li><a href="#k_-_ガソリンスタンド">K - ガソリンスタンド</a><li><a href="#l_-_嘘つきな生徒たち">L - 嘘つきな生徒たち</a><li><a href="#m_-_名前の変更">M - 名前の変更</a><li><a href="#n_-_共通部分">N - 共通部分</a><li><a href="#o_-_ペアスコア">O - ペアスコア</a></ol></div> <h2 id="a_-_アトラクション"><a href="#a_-_アトラクション" class=header-anchor >A - アトラクション</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_a">問題</a></p> <p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>≥</mo><mi>H</mi><mo>∧</mo><mi>w</mi><mo>≤</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">h \geq H \wedge w \leq W</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">h</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >∧</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> を満たすか調べて, 満たすなら <code>Yes</code>, それ以外のときは <code>No</code>.</p> <pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> H, W, h, w;
    cin &gt;&gt; H &gt;&gt; W &gt;&gt; h &gt;&gt; w;
    <span class=hljs-keyword >if</span> (h &gt;= H &amp;&amp; w &lt;= W) cout &lt;&lt; <span class=hljs-string >&quot;Yes&quot;</span> &lt;&lt; endl;
    <span class=hljs-keyword >else</span> cout &lt;&lt; <span class=hljs-string >&quot;No&quot;</span> &lt;&lt; endl;
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28272351">提出コード</a></p> <h2 id="b_-_穴の開いた硬貨"><a href="#b_-_穴の開いた硬貨" class=header-anchor >B - 穴の開いた硬貨</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_b">問題</a></p> <p>お釣りに払う硬貨の枚数を最小にするためには貪欲に額面が大きい硬貨から順に払っていけばよい. 100円以上のお釣りは 100円玉, 500円玉 を使って払えばよいのでお釣り &#40;<span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>−</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">B-A</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span>&#41; を払うときに5円玉と50円玉を何枚使うかを数えればよい.</p> <pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-type >int</span> <span class=hljs-title >calc</span><span class=hljs-params >(<span class=hljs-type >int</span> a, <span class=hljs-type >int</span> b)</span> </span>{
    <span class=hljs-type >int</span> rem = (b - a) % <span class=hljs-number >100</span>;
    <span class=hljs-type >int</span> ans = rem / <span class=hljs-number >50</span>;
    rem %= <span class=hljs-number >10</span>;
    ans += rem / <span class=hljs-number >5</span>;
    <span class=hljs-keyword >return</span> ans;
}

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> n;
    cin &gt;&gt; n;
    <span class=hljs-type >int</span> ans = <span class=hljs-number >0</span>;
    <span class=hljs-built_in >rep</span>(i,n) {
        <span class=hljs-type >int</span> a, b;
        cin &gt;&gt; a &gt;&gt; b;
        ans += <span class=hljs-built_in >calc</span>(a, b);
    }
    cout &lt;&lt; ans &lt;&lt; endl;
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28272439">提出コード</a></p> <h2 id="c_-_最速正解者"><a href="#c_-_最速正解者" class=header-anchor >C - 最速正解者</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_c">問題</a></p> <p>提出を逆順に処理していき <code>AC</code> があるたびに問題 <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> の最速提出 ID を上書きしていく.</p> <p>提出順に処理をしていってもよいが, 問題 <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> がすでに解かれていた場合とそうでない場合で場合分けしないといけないので面倒</p> <pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> n;
    cin &gt;&gt; n;
    vector&lt;pair&lt;<span class=hljs-type >char</span>,string&gt;&gt; submits;
    <span class=hljs-built_in >rep</span>(i,n) {
        <span class=hljs-type >char</span> p;
        string v;
        cin &gt;&gt; p &gt;&gt; v;
        submits.<span class=hljs-built_in >push_back</span>({p, v});
    }

    <span class=hljs-function >vector&lt;<span class=hljs-type >int</span>&gt; <span class=hljs-title >ans</span><span class=hljs-params >(<span class=hljs-number >6</span>)</span></span>;
    <span class=hljs-keyword >for</span> (<span class=hljs-type >int</span> i = n<span class=hljs-number >-1</span>; i &gt;= <span class=hljs-number >0</span>; i--) {
        <span class=hljs-keyword >if</span> (submits[i].second == <span class=hljs-string >&quot;AC&quot;</span>) ans[submits[i].first - <span class=hljs-string >&#x27;A&#x27;</span>] = i+<span class=hljs-number >1</span>;
    }

    <span class=hljs-built_in >rep</span>(i,<span class=hljs-number >6</span>) cout &lt;&lt; ans[i] &lt;&lt; endl;
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28272581">提出コード</a></p> <h2 id="d_-_試験"><a href="#d_-_試験" class=header-anchor >D - 試験</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_d">問題</a></p> <p>適当な比較関数を作る場合, 昇順に並び替えたい場合は <code>compare&#40;T a, T b&#41;</code> のうち <code>b</code> 大きくなるようなときに <code>true</code> を返すような <code>compare</code> 関数を定義し 降順に並び替えたい場合は <code>compare&#40;T a, T b&#41;</code> のうち <code>a</code> 大きくなるようなときに <code>true</code> を返すような 関数を定義する.</p> <pre><code class="cpp hljs"><span class=hljs-keyword >struct</span> <span class="hljs-title class_">Student</span> {
    <span class=hljs-type >int</span> id, math, eng;
};

<span class=hljs-function ><span class=hljs-type >bool</span> <span class=hljs-title >compare</span><span class=hljs-params >(Student a, Student b)</span> </span>{
    <span class=hljs-keyword >if</span> (a.math + a.eng &gt; b.math + b.eng) <span class=hljs-keyword >return</span> <span class=hljs-literal >true</span>;
    <span class=hljs-keyword >if</span> (a.math + a.eng &lt; b.math + b.eng) <span class=hljs-keyword >return</span> <span class=hljs-literal >false</span>;
    <span class=hljs-keyword >if</span> (a.math &gt; b.math) <span class=hljs-keyword >return</span> <span class=hljs-literal >true</span>;
    <span class=hljs-keyword >if</span> (a.math &lt; b.math) <span class=hljs-keyword >return</span> <span class=hljs-literal >false</span>;
    <span class=hljs-keyword >return</span> a.id &lt; b.id;
}

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> n;
    cin &gt;&gt; n;
    <span class=hljs-function >vector&lt;<span class=hljs-type >int</span>&gt; <span class=hljs-title >A</span><span class=hljs-params >(n)</span>, <span class=hljs-title >B</span><span class=hljs-params >(n)</span></span>;
    <span class=hljs-built_in >rep</span>(i,n) cin &gt;&gt; A[i];
    <span class=hljs-built_in >rep</span>(i,n) cin &gt;&gt; B[i];
    <span class=hljs-function >vector&lt;Student&gt; <span class=hljs-title >students</span><span class=hljs-params >(n)</span></span>;
    <span class=hljs-built_in >rep</span>(i,n) students[i] = {i+<span class=hljs-number >1</span>, A[i], B[i]};
    <span class=hljs-built_in >sort</span>(<span class=hljs-built_in >all</span>(students), compare);

    <span class=hljs-built_in >rep</span>(i,n) {
        <span class=hljs-keyword >if</span> (i != <span class=hljs-number >0</span>) cout &lt;&lt; <span class=hljs-string >&quot; &quot;</span>;
        cout &lt;&lt; students[i].id;
    }
    cout &lt;&lt; endl;
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28272658">提出コード</a></p> <h2 id="e_-_キーボード"><a href="#e_-_キーボード" class=header-anchor >E - キーボード</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_e">問題</a></p> <p>題意を愚直に実装する</p> <pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-type >bool</span> <span class=hljs-title >is_left</span><span class=hljs-params >(<span class=hljs-type >int</span> a)</span> </span>{ <span class=hljs-keyword >return</span> <span class=hljs-number >1</span> &lt;= a &amp;&amp; a &lt;= <span class=hljs-number >5</span>; }
<span class=hljs-function ><span class=hljs-type >bool</span> <span class=hljs-title >is_right</span><span class=hljs-params >(<span class=hljs-type >int</span> a)</span> </span>{ <span class=hljs-keyword >return</span> !<span class=hljs-built_in >is_left</span>(a); }
<span class=hljs-function ><span class=hljs-type >bool</span> <span class=hljs-title >same_hand</span><span class=hljs-params >(<span class=hljs-type >int</span> a, <span class=hljs-type >int</span> b)</span> </span>{
    <span class=hljs-keyword >if</span> (<span class=hljs-built_in >is_left</span>(a) &amp;&amp; <span class=hljs-built_in >is_left</span>(b)) <span class=hljs-keyword >return</span> <span class=hljs-literal >true</span>;
    <span class=hljs-keyword >if</span> (<span class=hljs-built_in >is_right</span>(a) &amp;&amp; <span class=hljs-built_in >is_right</span>(b)) <span class=hljs-keyword >return</span> <span class=hljs-literal >true</span>;
    <span class=hljs-keyword >return</span> <span class=hljs-literal >false</span>;
}

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    string N;
    cin &gt;&gt; N;
    <span class=hljs-type >char</span> prev = N[<span class=hljs-number >0</span>];
    <span class=hljs-type >int</span> ans = <span class=hljs-number >500</span>;
    <span class=hljs-built_in >rep2</span>(i,<span class=hljs-number >1</span>,N.<span class=hljs-built_in >size</span>()) {
        <span class=hljs-keyword >if</span> (prev == N[i]) ans += <span class=hljs-number >301</span>;
        <span class=hljs-keyword >else</span> <span class=hljs-keyword >if</span> (<span class=hljs-built_in >same_hand</span>(prev - <span class=hljs-string >&#x27;0&#x27;</span>, N[i] - <span class=hljs-string >&#x27;0&#x27;</span>)) ans += <span class=hljs-number >210</span>;
        <span class=hljs-keyword >else</span> ans += <span class=hljs-number >100</span>;
        prev = N[i];
    }
    cout &lt;&lt; ans &lt;&lt; endl;
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28272779">提出コード</a></p> <h2 id="f_-_将棋のように"><a href="#f_-_将棋のように" class=header-anchor >F - 将棋のように</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_f">問題</a></p> <p>幅優先探索を使って動ける方向にひたすら動く.</p> <pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> A, B;
    cin &gt;&gt; A &gt;&gt; B;
    A--, B--;
    <span class=hljs-type >int</span> grid[<span class=hljs-number >9</span>][<span class=hljs-number >9</span>];
    <span class=hljs-built_in >rep</span>(i,<span class=hljs-number >9</span>) <span class=hljs-built_in >rep</span>(j,<span class=hljs-number >9</span>) grid[i][j] = <span class=hljs-number >0</span>;
    <span class=hljs-function >vector&lt;string&gt; <span class=hljs-title >S</span><span class=hljs-params >(<span class=hljs-number >3</span>)</span></span>;
    <span class=hljs-built_in >rep</span>(i,<span class=hljs-number >3</span>) cin &gt;&gt; S[i];

    queue&lt;P&gt; que;
    que.<span class=hljs-built_in >push</span>({A,B});
    <span class=hljs-keyword >while</span> (!que.<span class=hljs-built_in >empty</span>()) {
        <span class=hljs-type >int</span> x, y;
        <span class=hljs-built_in >tie</span>(x,y) = que.<span class=hljs-built_in >front</span>();
        que.<span class=hljs-built_in >pop</span>();
        grid[x][y] = <span class=hljs-number >1</span>;

        <span class=hljs-built_in >rep</span>(i,<span class=hljs-number >3</span>) {
            <span class=hljs-built_in >rep</span>(j,<span class=hljs-number >3</span>) {
                <span class=hljs-keyword >if</span> (S[i][j] == <span class=hljs-string >&#x27;.&#x27;</span>) <span class=hljs-keyword >continue</span>;
                <span class=hljs-type >int</span> nx = i - <span class=hljs-number >1</span> + x;
                <span class=hljs-type >int</span> ny = j - <span class=hljs-number >1</span> + y;
                <span class=hljs-keyword >if</span> (<span class=hljs-number >0</span> &lt;= nx &amp;&amp; nx &lt; <span class=hljs-number >9</span> &amp;&amp; <span class=hljs-number >0</span> &lt;= ny &amp;&amp; ny &lt; <span class=hljs-number >9</span>) {
                    <span class=hljs-keyword >if</span> (grid[nx][ny]) <span class=hljs-keyword >continue</span>;
                    que.<span class=hljs-built_in >push</span>({nx,ny});
                }
            }
        }
    }

    <span class=hljs-type >int</span> ans = <span class=hljs-number >0</span>;
    <span class=hljs-built_in >rep</span>(i,<span class=hljs-number >9</span>) <span class=hljs-built_in >rep</span>(j,<span class=hljs-number >9</span>) ans += grid[i][j];
    cout &lt;&lt; ans &lt;&lt; endl;
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28272916">提出コード</a></p> <h2 id="g_-_連結"><a href="#g_-_連結" class=header-anchor >G - 連結</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_g">問題</a></p> <p>ノード数が少ないので隣接行列を使いながら, 経路探索する. コメントアウトしている <code>visited&#91;from&#93; &#61; 0</code> を入れる経路の全探索になってしまうので注意する. 計算量が <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy=false >(</mo><mi>Q</mi><mi>N</mi><mo stretchy=false >!</mo><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">O(QN!)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.10903em;">QN</span><span class=mclose >!)</span></span></span></span> に跳ね上がる.</p> <pre><code class="cpp hljs"><span class=hljs-type >int</span> n, q;
<span class=hljs-type >int</span> graph[<span class=hljs-number >105</span>][<span class=hljs-number >105</span>];
<span class=hljs-type >int</span> visited[<span class=hljs-number >105</span>];

<span class=hljs-function ><span class=hljs-type >bool</span> <span class=hljs-title >dfs</span><span class=hljs-params >(<span class=hljs-type >int</span> from, <span class=hljs-type >int</span> to)</span> </span>{
    <span class=hljs-keyword >if</span> (from == to) <span class=hljs-keyword >return</span> <span class=hljs-literal >true</span>;
    <span class=hljs-keyword >if</span> (visited[from]) <span class=hljs-keyword >return</span> <span class=hljs-literal >false</span>;
    visited[from] = <span class=hljs-number >1</span>;
    <span class=hljs-built_in >rep</span>(i,n) {
        <span class=hljs-keyword >if</span> (graph[from][i]) {
            <span class=hljs-keyword >if</span> (<span class=hljs-built_in >dfs</span>(i, to)) {
                <span class=hljs-comment >// visited[from] = 0;</span>
                <span class=hljs-keyword >return</span> <span class=hljs-literal >true</span>;
            }
        }
    }
    <span class=hljs-comment >// visited[from] = 0;</span>
    <span class=hljs-keyword >return</span> <span class=hljs-literal >false</span>;
}

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    cin &gt;&gt; n &gt;&gt; q;
    <span class=hljs-built_in >rep</span>(i,n) visited[i] = <span class=hljs-literal >false</span>;
    <span class=hljs-built_in >rep</span>(i,q) {
        <span class=hljs-type >int</span> t, u, v;
        cin &gt;&gt; t &gt;&gt; u &gt;&gt; v;
        u--, v--;
        <span class=hljs-keyword >if</span> (t == <span class=hljs-number >1</span>) {
            graph[u][v] = <span class=hljs-number >1</span> - graph[u][v];
            graph[v][u] = <span class=hljs-number >1</span> - graph[v][u];
        } <span class=hljs-keyword >else</span> {
            <span class=hljs-built_in >rep</span>(i,n) visited[i] = <span class=hljs-literal >false</span>;
            <span class=hljs-keyword >if</span> (<span class=hljs-built_in >dfs</span>(u, v)) cout &lt;&lt; <span class=hljs-string >&quot;Yes&quot;</span> &lt;&lt; endl;
            <span class=hljs-keyword >else</span> cout &lt;&lt; <span class=hljs-string >&quot;No&quot;</span> &lt;&lt; endl;
        }
    }
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28273954">提出コード</a></p> <h2 id="h_-_最長非共通部分列"><a href="#h_-_最長非共通部分列" class=header-anchor >H - 最長非共通部分列</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_h">問題</a></p> <p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=false >[</mo><mi>i</mi><mo stretchy=false >]</mo><mo stretchy=false >[</mo><mi>j</mi><mo stretchy=false >]</mo></mrow><annotation encoding="application/x-tex">dp[i][j]</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class=mopen >[</span><span class="mord mathnormal">i</span><span class=mclose >]</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mclose >]</span></span></span></span> を <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> を <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 文字目まで見て, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> を <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 文字目まで見たときの最長非共通部分列とする.</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>i</mi></msub><mo mathvariant=normal >≠</mo><msub><mi>T</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">S_i \neq T_j</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel ><span class=mrel ><span class="mord vbox"><span class=thinbox ><span class=rlap ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class=inner ><span class=mord ><span class=mrel ></span></span></span><span class=fix ></span></span></span></span></span><span class=mrel >=</span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.969438em;vertical-align:-0.286108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> のとき <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=false >[</mo><mi>i</mi><mo stretchy=false >]</mo><mo stretchy=false >[</mo><mi>j</mi><mo stretchy=false >]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy=false >[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=false >]</mo><mo stretchy=false >[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy=false >]</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dp[i][j] = dp[i-1][j-1] + 1</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class=mopen >[</span><span class="mord mathnormal">i</span><span class=mclose >]</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mclose >]</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class=mopen >[</span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >1</span><span class=mclose >]</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >1</span><span class=mclose >]</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >1</span></span></span></span></p> <li><p>それ以外のとき, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> の見ている文字をずらすか, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> の見ている文字をずらすかでより大きい値になる方を採用すればよいから <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy=false >[</mo><mi>i</mi><mo stretchy=false >]</mo><mo stretchy=false >[</mo><mi>j</mi><mo stretchy=false >]</mo><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy=false >(</mo><mi>d</mi><mi>p</mi><mo stretchy=false >[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy=false >]</mo><mo stretchy=false >[</mo><mi>j</mi><mo stretchy=false >]</mo><mo separator=true >,</mo><mi>d</mi><mi>p</mi><mo stretchy=false >[</mo><mi>i</mi><mo stretchy=false >]</mo><mo stretchy=false >[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy=false >]</mo><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">dp[i][j] = \max(dp[i-1][j], dp[i][j-1])</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class=mopen >[</span><span class="mord mathnormal">i</span><span class=mclose >]</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mclose >]</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mop >max</span><span class=mopen >(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class=mopen >[</span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >1</span><span class=mclose >]</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mclose >]</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class=mopen >[</span><span class="mord mathnormal">i</span><span class=mclose >]</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >1</span><span class=mclose >])</span></span></span></span></p> </ul> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28274046">提出コード</a></p> <h2 id="i_-_直通エレベーター"><a href="#i_-_直通エレベーター" class=header-anchor >I - 直通エレベーター</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_i">問題</a></p> <p>エレベーターのある階と1階, N階を昇順に並べたものを <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub><mo separator=true >,</mo><msub><mi>e</mi><mn>2</mn></msub><mo separator=true >,</mo><mo>⋯</mo><mtext> </mtext><mo separator=true >,</mo><msub><mi>e</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">e_1, e_2, \cdots, e_l</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=minner >⋯</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> とする. &#40;<span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn><mo separator=true >,</mo><msub><mi>e</mi><mi>l</mi></msub><mo>=</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">e_1 = 1, e_l = N</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.58056em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class=mord >1</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>&#41;.</p> <p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub><mo separator=true >,</mo><msub><mi>e</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">e_i, e_{i+1}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.638891em;vertical-align:-0.208331em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> &#40;<span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>l</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \leq i \leq l-1</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.78041em;vertical-align:-0.13597em;"></span><span class=mord >0</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >1</span></span></span></span>&#41; をつなぐ移動コスト <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy=false >(</mo><msub><mi>e</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>e</mi><mi>i</mi></msub><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">(e_{i+1} - e_i)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.208331em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord ><span class="mord mathnormal">e</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mclose >)</span></span></span></span> なエレベーターを新設すると, この問題はもとからあったエレベーターと新しく作ったエレベータを使って 1 階から N 階まで最短で行く問題に置き換えられる.</p> <p>よってダイクストラ法を使って解けるのだが, グラフの作り方に注意する必要がある.</p> <p>今, 階数が最大で <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">N = 10^{18}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8141079999999999em;vertical-align:0em;"></span><span class=mord >1</span><span class=mord ><span class=mord >0</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">18</span></span></span></span></span></span></span></span></span></span></span></span> ととても大きいので愚直に <code>vector</code> を使って隣接リストを構築することはできない. そこで <code>map&lt;ll,vector&lt;ll&gt;&gt;</code> を使って隣接リストと同じことをしようと考えるかもしれないが, これをすると TLE を食らう.</p> <p><code>vector</code> と違って <code>map</code> のアクセスは <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>log</mi><mo>⁡</mo><mo stretchy=false >(</mo><mi>N</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">\log(N)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mop >lo<span style="margin-right:0.01389em;">g</span></span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mclose >)</span></span></span></span> かかるからなのだろう. ちゃんとした計算量の見積もりはできてない. <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy=false >(</mo><mi>M</mi><mo stretchy=false >(</mo><mi>log</mi><mo>⁡</mo><mi>M</mi><msup><mo stretchy=false >)</mo><mn>2</mn></msup><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">O(M (\log M)^2)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=mopen >(</span><span class=mop >lo<span style="margin-right:0.01389em;">g</span></span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=mclose ><span class=mclose >)</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class=mclose >)</span></span></span></span> くらいな気がする.</p> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28274564">TLEコード</a></p> <p><code>map</code> のアクセス重い問題を解決するために階数を圧縮して隣接リストを作ると AC を取ることができる. <code>map</code> 使ったときに TLE で落ちたテストケースの実行時間が 2140 ms とただでさえギリギリなので, <code>map</code> 使った場合だと計算量的には大丈夫そうだけれでも 定数項が結構効いてきているのかな？各テストケースの実行時間を比較すると <code>map</code> 実装の方が3倍近く時間がかかっている様子.</p> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28275083">提出コード</a></p> <h2 id="j_-_回転と反転"><a href="#j_-_回転と反転" class=header-anchor >J - 回転と反転</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_j">問題</a></p> <p>簡単のため <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">N = 3</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >3</span></span></span></span> のときについて考えてみる.</p> <p>はじめ <code>0</code> 番の状態&#40;赤文字が状態の index&#41; で右に90度回転, 左に90度回転, 上下反転, 左右反転などの操作を見ると以下の図のような8通りのいずれかになる.</p> <p><img src="/CompetitiveProgramming/assets/atcoder/past/009/j.png" alt=j.png  /></p> <p>それぞれの操作によって, 各状態は以下の表のように遷移する.</p> <table><tr><th align=center >元<th align=center >rotr90<th align=center >rotl90<th align=center >上下<th align=center >左右<tr><td align=center >0<td align=center >1<td align=center >3<td align=center >4<td align=center >6<tr><td align=center >1<td align=center >2<td align=center >0<td align=center >7<td align=center >5<tr><td align=center >2<td align=center >3<td align=center >1<td align=center >6<td align=center >4<tr><td align=center >3<td align=center >0<td align=center >2<td align=center >5<td align=center >7<tr><td align=center >4<td align=center >5<td align=center >7<td align=center >0<td align=center >2<tr><td align=center >5<td align=center >6<td align=center >4<td align=center >3<td align=center >1<tr><td align=center >6<td align=center >7<td align=center >5<td align=center >2<td align=center >0<tr><td align=center >7<td align=center >4<td align=center >6<td align=center >1<td align=center >3</table> <p>状態 <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> の <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy=false >(</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup><mo separator=true >,</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">(i^\prime, j^\prime)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.001892em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class=mclose >)</span></span></span></span> 成分と状態 <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >0</span></span></span></span> の <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy=false >(</mo><mi>i</mi><mo separator=true >,</mo><mi>j</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">(i, j)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class="mord mathnormal">i</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mclose >)</span></span></span></span> 成分との対応関係は以下のようになる.</p> <ul> <li><p>状態0</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態1</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = N - 1 - j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態2</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = N - 1 - i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = N - 1 - j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態3</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = N - 1 - i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態4</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = N - 1 - i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態5</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態6</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = N - 1 - j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> <li><p>状態7</p> <ul> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>j</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">i = N - 1 - j^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.946332em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> <li><p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo>−</mo><msup><mi>i</mi><mo mathvariant=normal >′</mo></msup></mrow><annotation encoding="application/x-tex">j = N - 1 - i^\prime</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal">i</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></p> </ul> </ul> <p>これらを元にコードを書くと以下のようになる.</p> <pre><code class="cpp hljs"><span class=hljs-type >const</span> <span class=hljs-type >int</span> trans[<span class=hljs-number >8</span>][<span class=hljs-number >4</span>] = {
    <span class=hljs-comment >// rotr90, rotl90, 上下, 左右</span>
    {<span class=hljs-number >1</span>, <span class=hljs-number >3</span>, <span class=hljs-number >4</span>, <span class=hljs-number >6</span>}, <span class=hljs-comment >// 0</span>
    {<span class=hljs-number >2</span>, <span class=hljs-number >0</span>, <span class=hljs-number >7</span>, <span class=hljs-number >5</span>}, <span class=hljs-comment >// 1</span>
    {<span class=hljs-number >3</span>, <span class=hljs-number >1</span>, <span class=hljs-number >6</span>, <span class=hljs-number >4</span>}, <span class=hljs-comment >// 2</span>
    {<span class=hljs-number >0</span>, <span class=hljs-number >2</span>, <span class=hljs-number >5</span>, <span class=hljs-number >7</span>}, <span class=hljs-comment >// 3</span>
    {<span class=hljs-number >5</span>, <span class=hljs-number >7</span>, <span class=hljs-number >0</span>, <span class=hljs-number >2</span>}, <span class=hljs-comment >// 4</span>
    {<span class=hljs-number >6</span>, <span class=hljs-number >4</span>, <span class=hljs-number >3</span>, <span class=hljs-number >1</span>}, <span class=hljs-comment >// 5</span>
    {<span class=hljs-number >7</span>, <span class=hljs-number >5</span>, <span class=hljs-number >2</span>, <span class=hljs-number >0</span>}, <span class=hljs-comment >// 6</span>
    {<span class=hljs-number >4</span>, <span class=hljs-number >6</span>, <span class=hljs-number >1</span>, <span class=hljs-number >3</span>}, <span class=hljs-comment >// 7</span>
};

<span class=hljs-keyword >struct</span> <span class="hljs-title class_">Matrix</span> {
    <span class=hljs-type >int</span> n;
    vector&lt;vector&lt;<span class=hljs-type >int</span>&gt;&gt; mat;
    <span class=hljs-type >int</span> state = <span class=hljs-number >0</span>;
    <span class=hljs-built_in >Matrix</span>(<span class=hljs-type >int</span> n) : <span class=hljs-built_in >n</span>(n), <span class=hljs-built_in >mat</span>(n, <span class=hljs-built_in >vector</span>&lt;<span class=hljs-type >int</span>&gt;(n, <span class=hljs-number >0</span>)){}

    <span class=hljs-function >P <span class=hljs-title >to_origin_index</span><span class=hljs-params >(<span class=hljs-type >int</span> i, <span class=hljs-type >int</span> j)</span> </span>{
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >0</span>) <span class=hljs-keyword >return</span> {i,j};
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >1</span>) <span class=hljs-keyword >return</span> {n<span class=hljs-number >-1</span>-j,i};
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >2</span>) <span class=hljs-keyword >return</span> {n<span class=hljs-number >-1</span>-i, n<span class=hljs-number >-1</span>-j};
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >3</span>) <span class=hljs-keyword >return</span> {j, n<span class=hljs-number >-1</span>-i};
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >4</span>) <span class=hljs-keyword >return</span> {n<span class=hljs-number >-1</span>-i, j};
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >5</span>) <span class=hljs-keyword >return</span> {j, i};
        <span class=hljs-keyword >if</span> (state == <span class=hljs-number >6</span>) <span class=hljs-keyword >return</span> {i, n<span class=hljs-number >-1</span>-j};
        <span class=hljs-keyword >return</span> {n<span class=hljs-number >-1</span>-j, n<span class=hljs-number >-1</span>-i};
    }

    <span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >flip</span><span class=hljs-params >(<span class=hljs-type >int</span> i, <span class=hljs-type >int</span> j)</span> </span>{
        <span class=hljs-type >const</span> <span class=hljs-keyword >auto</span>[oi, oj] = <span class=hljs-built_in >to_origin_index</span>(i, j);
        mat[oi][oj] = !mat[oi][oj];
    }

    <span class=hljs-function ><span class=hljs-type >int</span> <span class=hljs-title >get</span><span class=hljs-params >(<span class=hljs-type >int</span> i, <span class=hljs-type >int</span> j)</span> </span>{
        <span class=hljs-type >const</span> <span class=hljs-keyword >auto</span>[oi, oj] = <span class=hljs-built_in >to_origin_index</span>(i, j);
        <span class=hljs-keyword >return</span> mat[oi][oj];
    }

    <span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >operation</span><span class=hljs-params >(<span class=hljs-type >int</span> op)</span> </span>{
        <span class=hljs-comment >// op: 0 -&gt; rotr90</span>
        <span class=hljs-comment >// op: 1 -&gt; rotl90</span>
        <span class=hljs-comment >// op: 2 -&gt; 上下反転</span>
        <span class=hljs-comment >// op: 3 -&gt; 左右反転</span>
        state = trans[state][op];
    }
};

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> n, q;
    cin &gt;&gt; n &gt;&gt; q;
    <span class=hljs-function >Matrix <span class=hljs-title >mat</span><span class=hljs-params >(n)</span></span>;
    <span class=hljs-built_in >rep</span>(i,q) {
        <span class=hljs-type >int</span> t;
        cin &gt;&gt; t;
        <span class=hljs-keyword >if</span> (t == <span class=hljs-number >1</span>) {
            <span class=hljs-type >int</span> x, y;
            cin &gt;&gt; x &gt;&gt; y;
            x--, y--;
            mat.<span class=hljs-built_in >flip</span>(x, y);
        } <span class=hljs-keyword >else</span> <span class=hljs-keyword >if</span> (t == <span class=hljs-number >2</span>) {
            <span class=hljs-type >char</span> c;
            cin &gt;&gt; c;
            <span class=hljs-keyword >if</span> (c == <span class=hljs-string >&#x27;A&#x27;</span>) mat.<span class=hljs-built_in >operation</span>(<span class=hljs-number >0</span>);
            <span class=hljs-keyword >else</span> mat.<span class=hljs-built_in >operation</span>(<span class=hljs-number >1</span>);
        } <span class=hljs-keyword >else</span> {
            <span class=hljs-type >char</span> c;
            cin &gt;&gt; c;
            <span class=hljs-keyword >if</span> (c == <span class=hljs-string >&#x27;A&#x27;</span>) mat.<span class=hljs-built_in >operation</span>(<span class=hljs-number >2</span>);
            <span class=hljs-keyword >else</span> mat.<span class=hljs-built_in >operation</span>(<span class=hljs-number >3</span>);
        }
    }

    <span class=hljs-built_in >rep</span>(i,n) {
        <span class=hljs-built_in >rep</span>(j,n) {
            cout &lt;&lt; mat.<span class=hljs-built_in >get</span>(i,j);
        }
        cout &lt;&lt; endl;
    }
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28277201">提出コード</a></p> <p><a href="/CompetitiveProgramming/algorithm/#行列操作">行・列の index を管理する方法</a>でも AC できた.</p> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28264875">提出コード</a></p> <h2 id="k_-_ガソリンスタンド"><a href="#k_-_ガソリンスタンド" class=header-anchor >K - ガソリンスタンド</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_k">問題</a></p> <p>街 <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span>, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> 間の最短距離を <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=false >(</mo><mi>u</mi><mo separator=true >,</mo><mi>v</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">dist(u, v)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class=mopen >(</span><span class="mord mathnormal">u</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=mclose >)</span></span></span></span> とする. 各ガソリンスタンドから <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 個の街への最短距離を計算しておき, 各クエリに対して <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel=0  displaystyle=true ><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mi>k</mi></munder><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=false >(</mo><mi>s</mi><mo separator=true >,</mo><msub><mi>a</mi><mi>k</mi></msub><mo stretchy=false >)</mo><mo>+</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=false >(</mo><msub><mi>a</mi><mi>k</mi></msub><mo separator=true >,</mo><mi>t</mi><mo stretchy=false >)</mo></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle \min_k dist(s, a_k) + dist(a_k, t)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.5021079999999998em;vertical-align:-0.7521079999999999em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.66786em;"><span style="top:-2.347892em;margin-left:0em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span><span class=mop >min</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.7521079999999999em;"><span></span></span></span></span></span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class=mopen >(</span><span class="mord mathnormal">s</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal">a</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class=mopen >(</span><span class=mord ><span class="mord mathnormal">a</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">t</span><span class=mclose >)</span></span></span></span> を答えればよい. 最短距離はダイクストラでもいいが幅優先探索で間に合う.</p> <pre><code class="cpp hljs"><span class=hljs-keyword >using</span> Graph = vector&lt;vector&lt;<span class=hljs-type >int</span>&gt;&gt;;

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >bfs</span><span class=hljs-params >(Graph &amp;graph, vector&lt;<span class=hljs-type >int</span>&gt; &amp;dist, <span class=hljs-type >int</span> s)</span> </span>{
    queue&lt;P&gt; que;
    dist[s] = <span class=hljs-number >0</span>;
    que.<span class=hljs-built_in >push</span>({s, <span class=hljs-number >0</span>});
    <span class=hljs-keyword >while</span> (!que.<span class=hljs-built_in >empty</span>()) {
        <span class=hljs-type >const</span> <span class=hljs-keyword >auto</span>[x,depth] = que.<span class=hljs-built_in >front</span>();
        que.<span class=hljs-built_in >pop</span>();

        <span class=hljs-keyword >for</span> (<span class=hljs-type >int</span> nx : graph[x]) {
            <span class=hljs-keyword >if</span> (dist[nx] &gt; depth + <span class=hljs-number >1</span>) {
                dist[nx] = depth + <span class=hljs-number >1</span>;
                que.<span class=hljs-built_in >push</span>({nx, depth+<span class=hljs-number >1</span>});
            }
        }
    }
}

<span class=hljs-function ><span class=hljs-type >void</span> <span class=hljs-title >solve</span><span class=hljs-params >()</span> </span>{
    <span class=hljs-type >int</span> n, m, q, k;
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q &gt;&gt; k;
    <span class=hljs-function >vector&lt;<span class=hljs-type >int</span>&gt; <span class=hljs-title >a</span><span class=hljs-params >(k)</span></span>;
    <span class=hljs-built_in >rep</span>(i,k) cin &gt;&gt; a[i], a[i]--;
    <span class=hljs-function >Graph <span class=hljs-title >graph</span><span class=hljs-params >(n)</span></span>;
    <span class=hljs-built_in >rep</span>(i,m) {
        <span class=hljs-type >int</span> u, v;
        cin &gt;&gt; u &gt;&gt; v;
        u--, v--;
        graph[u].<span class=hljs-built_in >push_back</span>(v);
        graph[v].<span class=hljs-built_in >push_back</span>(u);
    }

    vector&lt;vector&lt;<span class=hljs-type >int</span>&gt;&gt; <span class=hljs-built_in >dists</span>(k, <span class=hljs-built_in >vector</span>&lt;<span class=hljs-type >int</span>&gt;(n, INF));
    <span class=hljs-built_in >rep</span>(i,k) {
        <span class=hljs-built_in >bfs</span>(graph, dists[i], a[i]);
    }

    <span class=hljs-built_in >rep</span>(_,q) {
        <span class=hljs-type >int</span> ans = INF;
        <span class=hljs-type >int</span> s, t;
        cin &gt;&gt; s &gt;&gt; t;
        s--, t--;
        <span class=hljs-built_in >rep</span>(i,k) <span class=hljs-built_in >chmin</span>(ans, dists[i][s] + dists[i][t]);
        cout &lt;&lt; ans &lt;&lt; endl;
    }
}</code></pre> <p><a href="https://atcoder.jp/contests/past202112-open/submissions/28278076">提出コード</a></p> <h2 id="l_-_嘘つきな生徒たち"><a href="#l_-_嘘つきな生徒たち" class=header-anchor >L - 嘘つきな生徒たち</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_l">問題</a></p> <p>わからない</p> <h2 id="m_-_名前の変更"><a href="#m_-_名前の変更" class=header-anchor >M - 名前の変更</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_m">問題</a></p> <p>わからない</p> <h2 id="n_-_共通部分"><a href="#n_-_共通部分" class=header-anchor >N - 共通部分</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_n">問題</a></p> <p>外積を使って共通部分の内部か外部かの判定をしているらしい. あと線分の交差判定も外積を使っているっぽい. ちゃんと理解はできてない.</p> <p>最後面積を求める部分は外積を使っていい感じに内部の面積だけを計算できているっぽい. 図示した感じだと凸多角形とか関係なく多角形の面積を求めるときは常に使えそうな雰囲気を感じた.</p> <h2 id="o_-_ペアスコア"><a href="#o_-_ペアスコア" class=header-anchor >O - ペアスコア</a></h2> <p><a href="https://atcoder.jp/contests/past202112-open/tasks/past202112_o">問題</a></p> <p>わからない</p> <div class=page-foot > <div class=copyright > &copy; <a href=https://github.com/goropikari>goropikari</a>. Last modified: February 13, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. This site source is located at <a href=https://goropikari.github.io/CompetitiveProgramming>goropikari/CompetitiveProgramming</a> </div> </div> </div> </div>